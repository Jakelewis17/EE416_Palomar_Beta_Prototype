Version 4
SHEET 1 3432 996
WIRE 3008 -192 2864 -192
WIRE 928 -176 784 -176
WIRE 1152 -176 992 -176
WIRE 2096 -176 1952 -176
WIRE -560 -144 -592 -144
WIRE -448 -144 -480 -144
WIRE 16 -128 -112 -128
WIRE 240 -128 96 -128
WIRE 2944 -112 2944 -128
WIRE 2032 -96 2032 -112
WIRE 2864 -96 2864 -192
WIRE 2912 -96 2864 -96
WIRE 1088 -80 1088 -96
WIRE 1952 -80 1952 -176
WIRE 2000 -80 1952 -80
WIRE 3008 -80 3008 -192
WIRE 3008 -80 2976 -80
WIRE 3056 -80 3008 -80
WIRE 3104 -80 3056 -80
WIRE 1056 -64 1040 -64
WIRE 2096 -64 2096 -176
WIRE 2096 -64 2064 -64
WIRE 2144 -64 2096 -64
WIRE 2192 -64 2144 -64
WIRE 2464 -64 2192 -64
WIRE 2496 -64 2464 -64
WIRE 2720 -64 2576 -64
WIRE 2752 -64 2720 -64
WIRE 2864 -64 2832 -64
WIRE 2912 -64 2864 -64
WIRE 1152 -48 1152 -176
WIRE 1152 -48 1120 -48
WIRE 1232 -48 1152 -48
WIRE 1360 -48 1232 -48
WIRE 1440 -48 1360 -48
WIRE 1552 -48 1440 -48
WIRE 1584 -48 1552 -48
WIRE 1808 -48 1664 -48
WIRE 1840 -48 1808 -48
WIRE 1952 -48 1920 -48
WIRE 2000 -48 1952 -48
WIRE 176 -32 176 -48
WIRE 688 -32 528 -32
WIRE 784 -32 784 -176
WIRE 784 -32 768 -32
WIRE 800 -32 784 -32
WIRE 912 -32 880 -32
WIRE 1056 -32 912 -32
WIRE 1232 -32 1232 -48
WIRE 1360 -32 1360 -48
WIRE 2944 -32 2944 -48
WIRE -528 -16 -528 -32
WIRE 144 -16 112 -16
WIRE 528 -16 528 -32
WIRE 2032 -16 2032 -32
WIRE -704 0 -832 0
WIRE -592 0 -592 -144
WIRE -592 0 -624 0
WIRE -560 0 -592 0
WIRE 240 0 240 -128
WIRE 240 0 208 0
WIRE 320 0 240 0
WIRE 368 0 320 0
WIRE 480 0 368 0
WIRE 1088 0 1088 -16
WIRE -448 16 -448 -144
WIRE -448 16 -496 16
WIRE -400 16 -448 16
WIRE -208 16 -400 16
WIRE -112 16 -112 -128
WIRE -112 16 -144 16
WIRE -80 16 -112 16
WIRE 32 16 -16 16
WIRE 144 16 32 16
WIRE 320 16 320 0
WIRE -560 32 -592 32
WIRE 912 32 912 -32
WIRE -832 48 -832 0
WIRE 176 48 176 32
WIRE 480 48 464 48
WIRE 2464 48 2464 -64
WIRE 2496 48 2464 48
WIRE 2608 48 2560 48
WIRE 2768 48 2608 48
WIRE 2864 48 2864 -64
WIRE 2864 48 2832 48
WIRE -592 64 -592 32
WIRE -528 64 -528 48
WIRE 1040 64 1040 -64
WIRE 1232 64 1232 48
WIRE 1232 64 1040 64
WIRE 1264 64 1232 64
WIRE 1360 64 1360 48
WIRE 1360 64 1264 64
WIRE 1552 64 1552 -48
WIRE 1584 64 1552 64
WIRE 1696 64 1648 64
WIRE 1856 64 1696 64
WIRE 1952 64 1952 -48
WIRE 1952 64 1920 64
WIRE 464 80 464 48
WIRE 528 80 528 64
WIRE 1264 80 1264 64
WIRE 2608 96 2608 48
WIRE 2720 96 2720 -64
WIRE 3056 96 3056 -80
WIRE 112 112 112 -16
WIRE 320 112 320 96
WIRE 320 112 112 112
WIRE 1696 112 1696 64
WIRE 1808 112 1808 -48
WIRE 2144 112 2144 -64
WIRE 32 128 32 16
WIRE 320 128 320 112
WIRE -1184 144 -1184 112
WIRE -1056 144 -1056 112
WIRE -832 144 -832 128
WIRE 912 176 912 96
WIRE 1120 176 912 176
WIRE 1264 176 1264 160
WIRE 1264 176 1120 176
WIRE 1120 192 1120 176
WIRE 2608 208 2608 176
WIRE 2720 208 2720 160
WIRE 2720 208 2608 208
WIRE 3056 208 3056 176
WIRE 3056 208 2720 208
WIRE 32 224 32 208
WIRE 320 224 320 208
WIRE 1696 224 1696 192
WIRE 1808 224 1808 176
WIRE 1808 224 1696 224
WIRE 2144 224 2144 192
WIRE 2144 224 1808 224
WIRE -1184 240 -1184 224
WIRE -1056 240 -1056 224
WIRE 3056 240 3056 208
WIRE 2144 256 2144 224
WIRE 3056 336 3056 320
WIRE 2144 352 2144 336
WIRE 928 448 784 448
WIRE 1152 448 992 448
WIRE 1152 496 1152 448
WIRE 1152 496 1088 496
WIRE 1088 528 1088 496
WIRE 2144 528 2032 528
WIRE 1040 544 912 544
WIRE 2032 560 2032 528
WIRE 1152 576 1152 496
WIRE 1264 576 1152 576
WIRE 1360 576 1264 576
WIRE 1552 576 1456 576
WIRE 1584 576 1552 576
WIRE 1808 576 1664 576
WIRE 1840 576 1808 576
WIRE 1952 576 1920 576
WIRE 1984 576 1952 576
WIRE 688 592 640 592
WIRE 784 592 784 448
WIRE 784 592 768 592
WIRE 800 592 784 592
WIRE 912 592 912 544
WIRE 912 592 880 592
WIRE 1056 592 1040 592
WIRE 1264 592 1264 576
WIRE 1088 624 1088 608
WIRE 640 640 640 592
WIRE 1456 640 1456 576
WIRE 912 656 912 592
WIRE 1984 656 1984 624
WIRE 2032 656 2032 640
WIRE 2032 656 1984 656
WIRE 2032 672 2032 656
WIRE 1040 688 1040 592
WIRE 1264 688 1264 672
WIRE 1264 688 1040 688
WIRE 1552 688 1552 576
WIRE 1584 688 1552 688
WIRE 1696 688 1648 688
WIRE 1856 688 1696 688
WIRE 1952 688 1952 576
WIRE 1952 688 1920 688
WIRE 1264 704 1264 688
WIRE 640 736 640 720
WIRE 1456 736 1456 720
WIRE 1696 736 1696 688
WIRE 1808 736 1808 576
WIRE 2144 736 2144 528
WIRE 912 800 912 720
WIRE 1120 800 912 800
WIRE 1264 800 1264 784
WIRE 1264 800 1120 800
WIRE 1120 816 1120 800
WIRE 1696 848 1696 816
WIRE 1808 848 1808 800
WIRE 1808 848 1696 848
WIRE 2144 848 2144 816
WIRE 2144 848 1808 848
WIRE 2144 880 2144 848
WIRE 2144 976 2144 960
FLAG -1056 240 0
FLAG 1088 0 0
FLAG 1088 -96 3.3V
FLAG 2144 352 0
FLAG -1184 240 0
FLAG -1184 112 3.3V
FLAG 2192 -64 Vout
FLAG 2032 -16 0
FLAG 176 48 0
FLAG -832 144 0
FLAG 368 0 IAOUT
FLAG -528 -32 3.3V
FLAG -1056 112 REFOUT
FLAG 1120 192 REFOUT
FLAG 1440 -48 Vout_LPF
FLAG 2144 976 0
FLAG 1456 736 0
FLAG 2032 672 0
FLAG 2032 -112 3.3V
FLAG 1088 624 0
FLAG 640 736 0
FLAG 1120 816 REFOUT
FLAG -528 64 0
FLAG -592 64 REFOUT
FLAG 176 -48 3.3V
FLAG -400 16 Vg
FLAG 464 80 0
FLAG 528 80 0
FLAG 3056 336 0
FLAG 2944 -32 0
FLAG 2944 -128 3.3V
FLAG 3104 -80 Vout_4p
FLAG 32 224 REFOUT
FLAG 320 224 REFOUT
SYMBOL OpAmps\\LT1078 1088 -112 R0
SYMATTR InstName U1
SYMBOL cap 896 32 R0
SYMATTR InstName C2_LPF
SYMATTR Value {C2_LPF}
SYMBOL cap 928 -160 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C1_LPF
SYMATTR Value {C1_LPF}
SYMBOL res 1216 -48 R0
SYMATTR InstName R3_LPF
SYMATTR Value 1.2Meg
SYMBOL res 1248 64 R0
SYMATTR InstName R4_LPF
SYMATTR Value 150k
SYMBOL res 784 -16 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R2_LPF
SYMATTR Value {R_LPF}
SYMBOL res 672 -16 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R1_LPF
SYMATTR Value {R_LPF}
SYMBOL res 1680 96 R0
SYMATTR InstName R3
SYMATTR Value {R/2}
SYMBOL res 1568 -32 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R1
SYMATTR Value {R}
SYMBOL res 1824 -32 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R2
SYMATTR Value {R}
SYMBOL res 2128 96 R0
SYMATTR InstName Rf
SYMATTR Value {Rf}
SYMBOL res 2128 240 R0
SYMATTR InstName Rsh
SYMATTR Value {Rf*(4*Q-1)}
SYMBOL cap 1792 112 R0
SYMATTR InstName C3
SYMATTR Value {2*C}
SYMBOL cap 1584 80 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C1
SYMATTR Value {C}
SYMBOL cap 1856 80 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C2
SYMATTR Value {C}
SYMBOL voltage -1184 128 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vcc1
SYMATTR Value 3.3V
SYMBOL res 16 112 R0
SYMATTR InstName R1_HPF
SYMATTR Value {R_HPF}
SYMBOL res 0 -112 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R2_HPF
SYMATTR Value {R_HPF}
SYMBOL cap -208 32 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C1_HPF
SYMATTR Value {C_HPF}
SYMBOL cap -16 0 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2_HPF
SYMATTR Value {C_HPF}
SYMBOL voltage -1056 128 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vref
SYMATTR Value 1.65V
SYMBOL voltage -832 32 R0
WINDOW 3 24 152 Left 2
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value 1.65
SYMATTR Value2 AC 1m
SYMATTR InstName Vin
SYMBOL OpAmps\\LT1078 -528 -48 R0
SYMATTR InstName U2
SYMBOL res 1680 720 R0
SYMATTR InstName R31
SYMATTR Value {R/2}
SYMBOL res 1568 592 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R11
SYMATTR Value {R}
SYMBOL res 1824 592 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R21
SYMATTR Value {R}
SYMBOL res 2128 720 R0
SYMATTR InstName Rf1
SYMATTR Value {Rf}
SYMBOL res 2128 864 R0
SYMATTR InstName Rsh1
SYMATTR Value {Rf*(4*Q-1)}
SYMBOL cap 1792 736 R0
SYMATTR InstName C31
SYMATTR Value {2*C}
SYMBOL cap 1584 704 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C11
SYMATTR Value {C}
SYMBOL cap 1856 704 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C21
SYMATTR Value {C}
SYMBOL e 2032 544 R0
SYMATTR InstName E2
SYMATTR Value 1
SYMBOL voltage 1456 624 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
WINDOW 3 24 44 Left 2
SYMATTR Value2 AC 1V
SYMATTR Value 1.65
SYMATTR InstName Vin3
SYMBOL OpAmps\\LT1078 2032 -128 R0
SYMATTR InstName U3
SYMBOL cap 896 656 R0
SYMATTR InstName C2_LPF1
SYMATTR Value {C2_LPF}
SYMBOL cap 928 464 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C1_LPF1
SYMATTR Value {C1_LPF}
SYMBOL res 1248 576 R0
SYMATTR InstName R3_LPF1
SYMATTR Value 1Meg
SYMBOL res 1248 688 R0
SYMATTR InstName R4_LPF1
SYMATTR Value 100k
SYMBOL res 784 608 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R2_LPF1
SYMATTR Value {R_LPF}
SYMBOL res 672 608 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R1_LPF1
SYMATTR Value {R_LPF}
SYMBOL voltage 640 624 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
WINDOW 3 24 152 Left 2
SYMATTR Value2 AC 100mV
SYMATTR Value 1.65V
SYMATTR InstName Vin4
SYMBOL res -576 -128 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName RGf
SYMATTR Value {RGf}
SYMBOL res -720 16 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName RGs
SYMATTR Value {RGs}
SYMBOL OpAmps\\LT1078 176 -64 R0
SYMATTR InstName U5
SYMBOL res 304 0 R0
SYMATTR InstName R3_HPF
SYMATTR Value 10k
SYMBOL res 304 112 R0
SYMATTR InstName R4_HPF
SYMATTR Value 20k
SYMBOL e 528 -32 R0
SYMATTR InstName Buffer
SYMATTR Value 1
SYMBOL res 2592 80 R0
SYMATTR InstName R4
SYMATTR Value {R/2}
SYMBOL res 2480 -48 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R5
SYMATTR Value {R}
SYMBOL res 2736 -48 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R6
SYMATTR Value {R}
SYMBOL res 3040 80 R0
SYMATTR InstName Rf2
SYMATTR Value {Rf}
SYMBOL res 3040 224 R0
SYMATTR InstName Rsh2
SYMATTR Value {Rf*(4*Q-1)}
SYMBOL cap 2704 96 R0
SYMATTR InstName C4
SYMATTR Value {2*C}
SYMBOL cap 2496 64 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C5
SYMATTR Value {C}
SYMBOL cap 2768 64 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C6
SYMATTR Value {C}
SYMBOL OpAmps\\LT1078 2944 -144 R0
SYMATTR InstName U6
SYMBOL e 1088 512 R0
SYMATTR InstName E1
SYMATTR Value 10000
SYMBOL res 1344 -48 R0
SYMATTR InstName R3_LPF2
SYMATTR Value 6.2Meg
TEXT -1112 320 Center 2 !.ac dec 100 0.1 1000
TEXT 1800 328 Center 2 !.param Fc=60 Q=10 R=26.5K C=100n Rf=250
TEXT 144 328 Center 2 !.param C_HPF=0.33u R_HPF=1Meg Rcomp=1.4Meg
TEXT 1016 328 Center 2 !.param R_LPF=360k C1_LPF=2.2n C2_LPF=10n
TEXT 1008 -400 Center 2 ;Low-pass Filter
TEXT 832 -352 Left 1 ;Fc ~= 1/(2pi*sqrt(R1*C1*R2*C2) = 87Hz\nSim shows Fc ~= 105Hz
TEXT 832 -304 Left 1 ;G = 1 + R3/R4 = 11
TEXT 1832 -400 Center 2 ;Notch Filter
TEXT 1704 -352 Left 1 ;Fn = 1/(6.28*R*C), Set to 60Hz\nChoose C = 100nF -> R = 26.5K
TEXT 1704 -304 Left 1 ;4Q = 1 + Rsh/Rf -> Rsh = Rf*(4Q - 1)\nChoose Q = 10, Rf = 250
TEXT -544 328 Center 2 !.param RGf=60k RGs=1k
TEXT -520 -400 Center 2 ;Model of Internal Gain
TEXT -600 -352 Left 1 ;G = RGf/RGs = 100
TEXT 152 -400 Center 2 ;Model of 2-pole High-pass Filter
TEXT -24 -352 Left 1 ;Fc ~= 1/(2pi*sqrt(R1*C1*R2*C2) = 0.48Hz
TEXT 2784 -400 Center 2 ;Notch Filter 4-Pole
TEXT 2296 -168 Left 2 ;Vout
