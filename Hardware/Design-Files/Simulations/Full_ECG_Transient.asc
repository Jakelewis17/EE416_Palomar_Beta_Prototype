Version 4
SHEET 1 3064 680
WIRE 1488 96 1344 96
WIRE 1712 96 1552 96
WIRE 2832 96 2688 96
WIRE -368 128 -400 128
WIRE -256 128 -288 128
WIRE 368 144 240 144
WIRE 592 144 448 144
WIRE 2768 176 2768 160
WIRE 1648 192 1648 176
WIRE 2688 192 2688 96
WIRE 2736 192 2688 192
WIRE 1616 208 1600 208
WIRE 2832 208 2832 96
WIRE 2832 208 2800 208
WIRE 2880 208 2832 208
WIRE 2928 208 2880 208
WIRE 1712 224 1712 96
WIRE 1712 224 1680 224
WIRE 1792 224 1712 224
WIRE 1904 224 1792 224
WIRE 1920 224 1904 224
WIRE 2320 224 2288 224
WIRE 2544 224 2400 224
WIRE 2576 224 2544 224
WIRE 2688 224 2656 224
WIRE 2736 224 2688 224
WIRE 528 240 528 224
WIRE 1248 240 1136 240
WIRE 1344 240 1344 96
WIRE 1344 240 1328 240
WIRE 1360 240 1344 240
WIRE 1472 240 1440 240
WIRE 1616 240 1472 240
WIRE 1792 240 1792 224
WIRE 1904 240 1904 224
WIRE -336 256 -336 240
WIRE 496 256 464 256
WIRE 880 256 880 240
WIRE 2768 256 2768 240
WIRE -512 272 -640 272
WIRE -400 272 -400 128
WIRE -400 272 -432 272
WIRE -368 272 -400 272
WIRE 592 272 592 144
WIRE 592 272 560 272
WIRE 672 272 592 272
WIRE 720 272 672 272
WIRE 832 272 720 272
WIRE 1648 272 1648 256
WIRE 2288 272 2288 224
WIRE 2288 272 2144 272
WIRE -256 288 -256 128
WIRE -256 288 -304 288
WIRE -208 288 -256 288
WIRE 144 288 16 288
WIRE 240 288 240 144
WIRE 240 288 208 288
WIRE 272 288 240 288
WIRE 384 288 336 288
WIRE 496 288 384 288
WIRE 672 288 672 272
WIRE 1136 288 1136 240
WIRE -368 304 -400 304
WIRE 1472 304 1472 240
WIRE -640 320 -640 272
WIRE 528 320 528 304
WIRE 832 320 816 320
WIRE 2144 320 2144 272
WIRE -400 336 -400 304
WIRE -336 336 -336 320
WIRE 16 336 16 288
WIRE 1600 336 1600 208
WIRE 1792 336 1792 320
WIRE 1792 336 1600 336
WIRE 1824 336 1792 336
WIRE 1904 336 1904 320
WIRE 1904 336 1824 336
WIRE 2288 336 2288 272
WIRE 2320 336 2288 336
WIRE 2432 336 2384 336
WIRE 2592 336 2432 336
WIRE 2688 336 2688 224
WIRE 2688 336 2656 336
WIRE 816 352 816 320
WIRE 880 352 880 336
WIRE 1824 352 1824 336
WIRE 464 384 464 256
WIRE 672 384 672 368
WIRE 672 384 464 384
WIRE 1136 384 1136 368
WIRE 2432 384 2432 336
WIRE 2544 384 2544 224
WIRE 2880 384 2880 208
WIRE 384 400 384 288
WIRE 672 400 672 384
WIRE -992 416 -992 384
WIRE -864 416 -864 384
WIRE -640 416 -640 400
WIRE 2144 416 2144 400
WIRE 16 432 16 416
WIRE 1472 448 1472 368
WIRE 1680 448 1472 448
WIRE 1824 448 1824 432
WIRE 1824 448 1680 448
WIRE 1680 464 1680 448
WIRE 384 496 384 480
WIRE 672 496 672 480
WIRE 2432 496 2432 464
WIRE 2544 496 2544 448
WIRE 2544 496 2432 496
WIRE 2880 496 2880 464
WIRE 2880 496 2544 496
WIRE -992 512 -992 496
WIRE -864 512 -864 496
WIRE 2880 528 2880 496
WIRE 2880 624 2880 608
FLAG -864 512 0
FLAG 1648 272 0
FLAG 1648 176 3.3V
FLAG 2880 624 0
FLAG -992 512 0
FLAG -992 384 3.3V
FLAG 2928 208 Vout
FLAG 2768 256 0
FLAG 528 320 0
FLAG -640 416 0
FLAG 720 272 IAOUT
FLAG -336 240 3.3V
FLAG -864 384 REFOUT
FLAG 1680 464 REFOUT
FLAG 1920 224 Vout_LPF
FLAG 2768 160 3.3V
FLAG -336 336 0
FLAG -400 336 REFOUT
FLAG 528 224 3.3V
FLAG -208 288 Vg
FLAG 816 352 0
FLAG 880 352 0
FLAG 384 496 REFOUT
FLAG 672 496 REFOUT
FLAG 16 432 0
FLAG 1136 384 0
FLAG 2144 416 0
SYMBOL OpAmps\\LT1078 1648 160 R0
SYMATTR InstName U1
SYMBOL cap 1456 304 R0
SYMATTR InstName C1
SYMATTR Value {C2_LPF}
SYMBOL cap 1488 112 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C2
SYMATTR Value {C1_LPF}
SYMBOL res 1776 224 R0
SYMATTR InstName R1
SYMATTR Value 1.2Meg
SYMBOL res 1808 336 R0
SYMATTR InstName R2
SYMATTR Value 150k
SYMBOL res 1344 256 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R3
SYMATTR Value {R_LPF}
SYMBOL res 1232 256 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R4
SYMATTR Value {R_LPF}
SYMBOL res 2416 368 R0
SYMATTR InstName R5
SYMATTR Value {R/2}
SYMBOL res 2304 240 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R6
SYMATTR Value {R}
SYMBOL res 2560 240 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R7
SYMATTR Value {R}
SYMBOL res 2864 368 R0
SYMATTR InstName Rf1
SYMATTR Value {Rf}
SYMBOL res 2864 512 R0
SYMATTR InstName Rsh1
SYMATTR Value {Rf*(4*Q-1)}
SYMBOL cap 2528 384 R0
SYMATTR InstName C3
SYMATTR Value {2*C}
SYMBOL cap 2320 352 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C4
SYMATTR Value {C}
SYMBOL cap 2592 352 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C5
SYMATTR Value {C}
SYMBOL voltage -992 400 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vcc1
SYMATTR Value 3.3V
SYMBOL res 368 384 R0
SYMATTR InstName R8
SYMATTR Value {R_HPF}
SYMBOL res 352 160 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R9
SYMATTR Value {R_HPF}
SYMBOL cap 144 304 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C6
SYMATTR Value {C_HPF}
SYMBOL cap 336 272 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C7
SYMATTR Value {C_HPF}
SYMBOL voltage -864 400 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vref1
SYMATTR Value 1.65V
SYMBOL voltage -640 304 R0
WINDOW 3 24 152 Left 2
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value SINE(1.65 1m 10)
SYMATTR InstName Vin1
SYMBOL OpAmps\\LT1078 -336 224 R0
SYMATTR InstName U2
SYMBOL OpAmps\\LT1078 2768 144 R0
SYMATTR InstName U3
SYMBOL res -384 144 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName RGf1
SYMATTR Value {RGf}
SYMBOL res -528 288 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName RGs1
SYMATTR Value {RGs}
SYMBOL OpAmps\\LT1078 528 208 R0
SYMATTR InstName U4
SYMBOL res 656 272 R0
SYMATTR InstName R10
SYMATTR Value 10k
SYMBOL res 656 384 R0
SYMATTR InstName R11
SYMATTR Value 20k
SYMBOL e 880 240 R0
SYMATTR InstName Buffer1
SYMATTR Value 1
SYMBOL voltage 16 320 R0
WINDOW 3 24 152 Left 2
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value SINE(1.65 100m 10)
SYMATTR InstName Vin2
SYMBOL voltage 1136 272 R0
WINDOW 3 24 152 Left 2
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value SINE(1.65 100m 10)
SYMATTR InstName Vin3
SYMBOL voltage 2144 304 R0
WINDOW 3 24 152 Left 2
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value SINE(1.65 0.7 10)
SYMATTR InstName Vin4
SYMBOL res 1888 224 R0
SYMATTR InstName R12
SYMATTR Value 6.2Meg
TEXT -920 592 Center 2 !.tran 0 500m 0
TEXT 2536 600 Center 2 !.param Fc=60 Q=10 R=26.5K C=100n Rf=250
TEXT 496 600 Center 2 !.param C_HPF=0.33u R_HPF=1Meg Rcomp=1.4Meg
TEXT 1576 600 Center 2 !.param R_LPF=380k C1_LPF=2.2n C2_LPF=10n
TEXT 1568 -128 Center 2 ;Low-pass Filter
TEXT 1392 -80 Left 1 ;Fc ~= 1/(2pi*sqrt(R1*C1*R2*C2) = 87Hz\nSim shows Fc ~= 105Hz
TEXT 1392 -32 Left 1 ;G = 1 + R3/R4 = 11
TEXT 2568 -128 Center 2 ;Notch Filter
TEXT 2440 -80 Left 1 ;Fn = 1/(6.28*R*C), Set to 60Hz\nChoose C = 100nF -> R = 26.5K
TEXT 2440 -32 Left 1 ;4Q = 1 + Rsh/Rf -> Rsh = Rf*(4Q - 1)\nChoose Q = 10, Rf = 250
TEXT -352 600 Center 2 !.param RGf=100k RGs=1k
TEXT -328 -128 Center 2 ;Model of Internal Gain
TEXT -408 -80 Left 1 ;G = RGf/RGs = 100
TEXT 504 -128 Center 2 ;Model of 2-pole High-pass Filter
TEXT 328 -80 Left 1 ;Fc ~= 1/(2pi*sqrt(R1*C1*R2*C2) = 0.48Hz\nSim shows Fc ~= 105Hz
